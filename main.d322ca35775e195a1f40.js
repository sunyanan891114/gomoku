!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.hideModal=function(){document.getElementsByClassName("modal")[0].className="modal"},e.showModal=function(t){document.getElementsByClassName("modal")[0].className="modal active",document.getElementsByClassName("modal__info")[0].innerHTML=t}},function(t,e,i){"use strict";var n=i(2),r=function(t){return t&&t.__esModule?t:{default:t}}(n),o=i(0);i(9),document.addEventListener("DOMContentLoaded",function(){document.getElementById("single-player").addEventListener("click",s),document.getElementById("multi-player").addEventListener("click",u)});var s=function(){new r.default(15,"single"),(0,o.hideModal)()},u=function(){new r.default(15,"multiple"),(0,o.hideModal)()}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),u=n(s),a=i(4),c=n(a),h=i(7),l=n(h),f=i(0),d=function(){function t(e,i){r(this,t),this.num=e,this.gridWidth=35,this.step=0,this.canvas=document.getElementById("chessboard-canvas"),this.canvas.width=this.gridWidth*this.num,this.canvas.height=this.gridWidth*this.num,this.brush=new u.default(this.canvas),this.mode=i,this.history=[],this.isSingleMode()&&(this.computerAI=new l.default(e)),this.isLx=this.isLx.bind(this),this.isLy=this.isLy.bind(this),this.isX=this.isX.bind(this),this.isY=this.isY.bind(this),this.calculatePiecePosition=this.calculatePiecePosition.bind(this),this.regret=this.regret.bind(this),this.initBoard()}return o(t,[{key:"isSingleMode",value:function(){return"single"===this.mode}},{key:"initBoard",value:function(){this.board=[];for(var t=0;t<this.num;t++){this.board[t]=[];for(var e=0;e<this.num;e++)this.board[t][e]=0}this.brush.drawBoard(this.num,this.gridWidth),this.bindEvents()}},{key:"bindEvents",value:function(){this.canvas.addEventListener("click",this.calculatePiecePosition),document.getElementById("regret").addEventListener("click",this.regret)}},{key:"regret",value:function(){this.isSingleMode()?(this.resetPiece(),this.resetPiece()):this.resetPiece()}},{key:"resetPiece",value:function(){var t=this.history[this.step];this.brush.clearPiece(t.x,t.y,this.gridWidth),this.board[t.x][t.y]=0,this.step--}},{key:"isPieceInBoard",value:function(t,e){return t>0&&t<this.gridWidth*this.num-this.gridWidth/2||e>0||e<this.gridWidth*this.num-this.gridWidth/2}},{key:"calculatePiecePosition",value:function(t){var e=t.offsetX,i=t.offsetY;if(this.isPieceInBoard(e,i)){var n=Math.round(e/this.gridWidth),r=Math.round(i/this.gridWidth);if(0===this.board[n][r]){if(this.completeBoard(n,r),this.isSingleMode()){var o=this.computerAI.nextStep(this.board);this.completeBoard(o.x,o.y)}}else alert("当前位置已有棋子，请不要重复落子哦")}}},{key:"completeBoard",value:function(t,e){this.step+=1;var i=c.default[this.step%2];this.brush.drawPiece(t,e,i.image,this.gridWidth),this.setPiece(t,e,i.value),this.history[this.step]={x:t,y:e}}},{key:"setPiece",value:function(t,e,i){this.board[t][e]=i,this.judge(t,e,i)}},{key:"judgeAlgorithms",value:function(){return[this.isX,this.isY,this.isLx,this.isLy]}},{key:"judge",value:function(t,e,i){this.judgeAlgorithms().map(function(n){n(i,t,e)})}},{key:"calculatePieceLine",value:function(t,e,i,n){return t?(i===n?e++:t=!1,{count:e,flag:t}):{count:e,flag:t}}},{key:"getDynamicPosition",value:function(t,e){return t<0||t>=this.num||e<0||e>=this.num?0:this.board[t][e]}},{key:"getMaxCount",value:function(t,e,i,n,r,o,s){for(var u=0,a=!0,c=!0,h=1;h<=5;h++){var l=this.calculatePieceLine(a,u,this.getDynamicPosition(t(r,h),e(o,h)),s);u=l.count,a=l.flag,l=this.calculatePieceLine(c,u,this.getDynamicPosition(i(r,h),n(o,h)),s),u=l.count,c=l.flag}this.success(u,s)}},{key:"valueGenerator",value:function(t,e){return t}},{key:"isX",value:function(t,e,i){this.getMaxCount(function(t,e){return t-e},this.valueGenerator,function(t,e){return t+e},this.valueGenerator,e,i,t)}},{key:"isY",value:function(t,e,i){this.getMaxCount(this.valueGenerator,function(t,e){return t-e},this.valueGenerator,function(t,e){return t+e},e,i,t)}},{key:"isLx",value:function(t,e,i){this.getMaxCount(function(t,e){return t-e},function(t,e){return t-e},function(t,e){return t+e},function(t,e){return t+e},e,i,t)}},{key:"isLy",value:function(t,e,i){this.getMaxCount(function(t,e){return t-e},function(t,e){return t+e},function(t,e){return t+e},function(t,e){return t-e},e,i,t)}},{key:"success",value:function(t,e){t>=4&&(c.default.map(function(t){t.value===e&&(0,f.showModal)(t.name+"获胜")}),this.canvas.removeEventListener("click",this.calculatePiecePosition))}}]),t}();e.default=d},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this.ctx=e.getContext("2d"),this.ctx.strokeStyle="#000000"}return r(t,[{key:"drawBoard",value:function(t,e){for(var i=e*t,n=1;n<t;n++)this.ctx.moveTo(0,n*e),this.ctx.lineTo(i,n*e),this.ctx.moveTo(n*e,0),this.ctx.lineTo(n*e,i);this.ctx.stroke()}},{key:"drawPiece",value:function(t,e,i,n){var r=this,o=new Image;o.src=i,o.onload=function(){r.ctx.drawImage(o,t*n-n/2,e*n-n/2,n,n)}}},{key:"clearPiece",value:function(t,e,i){this.ctx.beginPath(),this.ctx.clearRect(t*i-i/2,e*i-i/2,i,i),this.ctx.moveTo(t*i-i/2,e*i),this.ctx.lineTo(t*i+i/2,e*i),this.ctx.moveTo(t*i,e*i-i/2),this.ctx.lineTo(t*i,e*i+i/2),this.ctx.stroke()}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(5),o=n(r),s=i(6),u=n(s);e.default=[{value:1,image:u.default,name:"白棋"},{value:2,name:"黑棋",image:o.default}]},function(t,e,i){t.exports=i.p+"piece-black.png"},function(t,e,i){t.exports=i.p+"piece-white.png"},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(8),s={player:[200,400,2e3,1e4,0],computer:[220,420,2200,2e4,0]},u=function(){function t(e){n(this,t);var i=(0,o.calculateWinNums)();this.wins=i.wins,this.count=i.count,this.num=e,this.playerScore=[],this.computerScore=[],this.playerWin=[],this.computerWin=[]}return r(t,[{key:"initScores",value:function(){for(var t=0;t<this.num;t++){this.playerScore[t]=[],this.computerScore[t]=[];for(var e=0;e<this.num;e++)this.playerScore[t][e]=0,this.computerScore[t][e]=0}for(var i=0;i<this.count;i++)this.playerWin[i]=0,this.computerWin[i]=0}},{key:"calculateWinStrategies",value:function(t){for(var e=0;e<this.num;e++)for(var i=0;i<this.num;i++)for(var n=0;n<this.count;n++)this.wins[e][i][n]&&(1===t[e][i]?(this.playerWin[n]++,this.computerWin[n]=5):2===t[e][i]&&(this.playerWin[n]=5,this.computerWin[n]++))}},{key:"calculateOptimizePosition",value:function(t){for(var e=0,i=0,n=0,r=0;r<this.num;r++)for(var o=0;o<this.num;o++)if(0==t[r][o]){for(var u=0;u<this.count;u++)this.wins[r][o][u]&&(this.playerScore[r][o]+=s.player[this.playerWin[u]],this.computerScore[r][o]+=s.computer[this.computerWin[u]]);this.playerScore[r][o]>e?(e=this.playerScore[r][o],i=r,n=o):this.playerScore[r][o]==e&&this.computerScore[r][o]>this.computerScore[i][n]&&(i=r,n=o),this.computerScore[r][o]>e?(e=this.computerScore[r][o],i=r,n=o):this.computerScore[r][o]==e&&this.playerScore[r][o]>this.playerScore[i][n]&&(i=r,n=o)}return{x:i,y:n}}},{key:"nextStep",value:function(t){return this.initScores(),this.calculateWinStrategies(t),this.calculateOptimizePosition(t)}}]),t}();e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.calculateWinNums=function(){for(var t=[],e=0;e<15;e++){t[e]=[];for(var i=0;i<15;i++)t[e][i]=[]}for(var n=0,r=0;r<15;r++)for(var o=0;o<11;o++){for(var s=0;s<5;s++)t[r][o+s][n]=!0;n++}for(var u=0;u<15;u++)for(var a=0;a<11;a++){for(var c=0;c<5;c++)t[a+c][u][n]=!0;n++}for(var h=0;h<11;h++)for(var l=0;l<11;l++){for(var f=0;f<5;f++)t[h+f][l+f][n]=!0;n++}for(var d=0;d<11;d++)for(var v=14;v>3;v--){for(var m=0;m<5;m++)t[d+m][v-m][n]=!0;n++}return{wins:t,count:n}}},function(t,e){}]);
//# sourceMappingURL=main.d322ca35775e195a1f40.js.map